"use strict";(self["webpackChunkproject"]=self["webpackChunkproject"]||[]).push([[8],{2008:function(t,e,a){a.r(e),a.d(e,{default:function(){return w}});var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"VisitAnalysis"},[e("div",{staticClass:"Headpart"},[e("VisitHeader")],1),e("div",{staticClass:"Bottompart"},[e("VisitBottom")],1)])},l=[],i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"VisitHeader"},[e("div",{staticClass:"DatePicker"},[e("div",{staticClass:"title"},[t._v("访问分析")]),e("div",{staticClass:"datepinpurt"},[e("span",{staticClass:"demonstration"},[t._v("时间选择")]),e("el-date-picker",{attrs:{type:"daterange","start-placeholder":"开始日期","end-placeholder":"结束日期","value-format":"yyyy-MM-dd"},on:{change:t.getTabledata},model:{value:t.getDate.date,callback:function(e){t.$set(t.getDate,"date",e)},expression:"getDate.date"}})],1)]),e("div",{staticClass:"Table"},[e("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData,border:"","header-cell-style":{background:"#EDF1F2"},"row-style":t.columnStyle,"cell-style":t.columnStyle}},[e("el-table-column",{attrs:{prop:"date",label:"时间"}}),e("el-table-column",{attrs:{prop:"pv",label:"浏览次数"}}),e("el-table-column",{attrs:{prop:"uv",label:"独立访客"}}),e("el-table-column",{attrs:{prop:"ip",label:"IP"}}),e("el-table-column",{attrs:{prop:"access_num",label:"访问量"}})],1)],1)])},r=[],o=a(2650),n={data(){return{getDate:{start_time:"",end_time:"",date:""},tableData:[]}},mounted(){this.getTabledata()},methods:{async getTabledata(){null!=this.getDate.date?(this.getDate.start_time=this.getDate.date[0],this.getDate.end_time=this.getDate.date[1]):(this.getDate.start_time="",this.getDate.end_time="");let t=await(0,o.Gt)(this.getDate.start_time,this.getDate.end_time),e={today:"今日",yesterday:"昨日",top:"历史最高",total:"历史累计"};this.tableData=Object.keys(t).map((a=>({date:e[a],...t[a]})))},columnStyle({rowIndex:t,columnIndex:e}){return 0==e&&0==t?"background:#FCEAB7":0==e&&1==t?"background:#A2E6F4":0==e&&2==t?"background:#F5B6B3":0==e&&3==t?"background:#FFA375":void 0}}},c=n,d=a(1001),u=(0,d.Z)(c,i,r,!1,null,"32c47472",null),p=u.exports,h=function(){var t=this,e=t._self._c;return e("div",{staticClass:"VisitBottom"},[e("div",{staticClass:"headpart"},[e("div",{staticClass:"leftpart"},[e("div",{ref:"myechart",staticClass:"echartleft"})]),e("div",{staticClass:"rightpart"},[e("div",{staticClass:"searchinput"},[e("el-input",{attrs:{placeholder:"搜索学院","suffix-icon":"el-icon-search"},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1),e("div",{staticClass:"searchtable"},[e("el-table",{staticStyle:{width:"100%"},attrs:{data:t.CollegeData.filter((e=>!t.search||e.name.toLowerCase().includes(t.search.toLowerCase()))),height:"288"}},[e("el-table-column",{attrs:{prop:"name",label:"学院"}}),e("el-table-column",{attrs:{prop:"peoplenum",label:"总人数（/千）"}}),e("el-table-column",{attrs:{prop:"access_num",label:"访问人数（/千）"}}),e("el-table-column",{attrs:{prop:"proportion",label:"访问占比（百分比）",width:"180"}})],1)],1)])]),e("div",{staticClass:"bottompart"},[e("div",{ref:"myechart1",staticClass:"Bottomechart"})])])},m=[],b={mounted(){this.setChart(),this.setChart1(),this.getCollegedata()},methods:{setChart(){var t=this.$echarts.init(this.$refs.myechart);window.onresize=function(){t.resize()};var e={legend:{orient:"vertical",right:"0%",top:"middle",itemGap:50},title:{text:"访问数",top:"5%",left:"5%"},tooltip:{trigger:"item"},series:[{left:-100,type:"pie",radius:["40%","70%"],roseType:"radius",label:{show:!1,position:"center"},emphasis:{label:{show:!0,fontSize:"18",fontWeight:"bold"}},labelLine:{show:!1},data:[{value:50,name:"用户访问数"},{value:40,name:"教师访问数"},{value:30,name:"学生访问数"},{value:20,name:"其他"}]}]};t.setOption(e)},setChart1(){var t=this.$echarts.init(this.$refs.myechart1);window.onresize=function(){t.resize()};var e={tooltip:{trigger:"axis"},title:{text:"历史访问量"},xAxis:{type:"category",data:["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"]},yAxis:{type:"value"},series:[{barWidth:30,data:[250,750,990,500,990,500,250,750,250,250,500,750],type:"bar"}]};t.setOption(e)},async getCollegedata(){let t=await(0,o.db)();this.CollegeData=t.college,this.Catid=t.college.map((t=>({catid:t.cid})))},async getPersondata(){let t=await(0,o.oO)(1);console.log("请求成功",t)}},data(){return{search:"",CollegeData:[],Catid:[]}}},g=b,v=(0,d.Z)(g,h,m,!1,null,"6f149758",null),f=v.exports,C={components:{VisitHeader:p,VisitBottom:f}},y=C,_=(0,d.Z)(y,s,l,!1,null,"e0d1e9bc",null),w=_.exports},2650:function(t,e,a){a.d(e,{Gt:function(){return l},db:function(){return i},oO:function(){return r}});var s=a(4471);function l(t,e){return(0,s.Z)({url:"/webservice/rest/server.php",method:"post",data:{start_time:t,end_time:e,wsfunction:"block_data_screen_access_table"}})}function i(){return(0,s.Z)({url:"/webservice/rest/server.php",method:"post",data:{wsfunction:"block_data_screen_get_college"}})}function r(t){return(0,s.Z)({url:"/webservice/rest/server.php",method:"post",data:{catid:t,wsfunction:"block_data_screen_academic_statistics"}})}}}]);
//# sourceMappingURL=8.6eb7a557.js.map